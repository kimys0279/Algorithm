# 8강 데이터베이스 설계
## 35강 정규화

```
테이블을 올바른 형태로 변경하고 분할하는 것
```


- 데이터베이스의 테이블을 규정된 올바른 형태(주관적인 기준으)로 개선해나가는 것이다.

1. 정규화
    |주문번호   |날짜    |설명     |연락처   |주문상품   |
    |:-|:-|:-|:-|:-|
    |1|1/1|박준용|010-xxxx|0001 OO 1개, 0002 xx 10개|
    |2|2/1|김재진|010-xxxx|0001 OO 2개, 0002 xx 3개|    
    |3|2/5|박준용|010-xxxx|0001 OO 3개, 0003 ^^ 1개|
1. 제1정규형
    - 관계형 데이터베이스의 테이블에는 하나의 셀에는 하나의 값만 저장할 수 있다는 제약이 있다.
    - 주문상품 역할을 나눠야 한다.
    
    테이블명 : 주문
    |주문번호   |날짜 |설명  |연락처   |상품코드   |상품명|개수|
    |:-|:-|:-|:-|:-|:-|-:|
    |1|1/1|박준용|010-xxxx|0001|OO|1|
    |1|1/1|박준용|010-xxxx|0002|XX|10|
    |2|2/1|김재진|010-xxxx|0001|OO|2|
    |2|2/1|김재진|010-xxxx|0002|XX|3|
    |3|2/5|박준용|010-xxxx|0001|OO|3|
    |3|2/5|박준용|010-xxxx|0003|^^|1|
    
    - 반복되는 부분을 세로(행) 방향으로 늘려나가는 것이 제1정규화의 1단계다.
    - 중복제거 뿐만아니라 분할도 이뤄진다.
        - 한 번의 주문으로 여러 개의 상품을 주문할 수 있으므로 주문번호, 날짜, 성명, 연락처가 동일한 값이 있을 수도 있다.
        
    테이블명 : 주문
    |주문번호   |날짜 |설명  |연락처   |
    |:-|:-|:-|:-|
    |1|1/1|박준용|010-xxxx|
    |2|2/1|김재진|010-xxxx|
    |3|2/5|박준용|010-xxxx|
    
    주문 번호로 연계
    
    테이블명 : 주문상품
    |주문번호     |상품코드   |상품명|개수|
    |:-|:-|:-|:-| 
    |1|0001|OO|1|
    |1|0002|XX|10|
    |2|0001|OO|2|
    |2|0002|XX|3|
    |3|0001|OO|3|
    |3|0003|^^|1|
    
    - 주문 테이블의 주문번호는 중복된 값이 존재하지 않기 때문에 기본키로 지정할 수 있다.
    - 제 1정규화에서는 테이블 분활과 기본키 지정이 이뤄진다.
1. 제2정규형
    - 데이터가 중복된 부분을 찾아서 테이블로 분할한다.
    
    테이블명 : 주문상품
    |주문번호     |상품코드   |상품명|개수|
    |:-|:-|:-|:-| 
    |1|0001|OO|1|
    |1|0002|XX|10|
    |2|0001|OO|2|
    |2|0002|XX|3|
    |3|0001|OO|3|
    |3|0003|^^|1|
    
    기본키 : 주문번호와 상품코드
    - 개수 열은 기본키가 결정되고 나면 특정할 수 있다.
    - 상품코드는 기본키의 일부이긴 하지만, 단독으로 기본키 역할을 할 수 없다.
    
    테이블명 : 주문상품
    |주문번호     |상품코드   |상품명|
    |:-|:-|:-|
    |1|0001|1|
    |1|0001|10|
    |2|0001|2|
    |2|0002|3|
    |3|0001|3|
    |3|0003|1|
    
    테이블명 : 상품
    |주문번호     |상품코드   |
    |:-|:-|
    |0001|OO|
    |0002|XX|
    |0003|^^|
    
1. 제3정규형
    - 중복된 부분을 찾아서 테이블을 분할한다.
    - 기본키 이외의 부분에서 중복이 없는지 조사한다. 
    
    
    테이블명 : 주문
    |주문번호   |날짜 |설명  |연락처   |
    |:-|:-|:-|:-|
    |1|1/1|박준용|010-xxxx|
    |2|2/1|김재진|010-xxxx|
    |3|2/5|박준용|010-xxxx|
    
    테이블명 : 주문
    |주문번호   |날짜 |고객번호 |
    |:-|:-|:-|
    |1|1/1|1|010-xxxx|
    |2|2/1|2|010-xxxx|
    |3|2/5|1|010-xxxx|
    
    
    테이블명 : 고객
    |고객번호   |연락처   |
    |:-|:-|
    |1|박준용|010-xxxx|
    |2|김재진|010-xxxx|
    
    - 전체테이블
        
    테이블명 : 주문 (기본키 : 주문번호)
    |주문번호   |날짜 |고객번호 |
    |:-|:-|:-|
    |1|1/1|1|
    |2|2/1|2|
    |3|2/5|1|
    
    
    테이블명 : 고객 (기본키 : 고객번호)
    |고객번호   |연락처   |
    |:-|:-|
    |1|박준용|010-xxxx|
    |2|김재진|010-xxxx|
    
    테이블명 : 주문상품 ( 기본키 : 주문번호, 상품코드)
    |주문번호     |상품코드   |상품명|
    |:-|:-|:-|
    |1|0001|1|
    |1|0001|10|
    |2|0001|2|
    |2|0002|3|
    |3|0001|3|
    |3|0003|1|
    
    테이블명 : 상품 (기본키 : 상품코드)
    |상품코드     |상품명   |
    |:-|:-|
    |0001|OO|
    |0002|XX|
    |0003|^^|
    
    - 5정규화까지 있다.
    
 1. 정규화의 목적
    - 정규화로 데이터 구조를 개선하는 것은 하나의 데이터가 한곳에 저장되도록 하기 위함이다.
    - 하나의 데이터가 반드시 한 곳에만 저장되어 있다면, 데이터를 변경하더라도 한곳만 변경하는 것으로 끝낼 수 있다.
    - 반면, 정규화가 되지 않은 경우에는 여기 중복해서 저장된 데이터를 검색하고 일일이 변경해야 한다.
    - 또한, 인덱스가 지정된 열의 데이터가 변경되는 경우에는 재구축해야한다.
    - 기본키는 분할한 테이블끼리 연계하기 위해 작성한, 이른바 내부적인 데이터이므로 변경될 일은 거의 없다.
    - 정규화를 통해 억제할 수 있다.

 
[참고](http://www.gurubee.net/lecture/3688)    
